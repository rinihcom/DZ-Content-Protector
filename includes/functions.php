<?php/** * Author : Budi S * Author URI: http://inef.web.id * License: GPL2 */ if ( !function_exists('div_billing_pluginurl') ){	function div_billing_pluginurl($param = ''){		if($param == 'css' || $param == 'js' || $param == 'images') $path=$param;		else $path = '';		return plugin_dir_url(dirname(__FILE__)).$path;	}}if ( !function_exists('div_billing_pluginpath') ){	function div_billing_pluginpath(){		return plugin_dir_path(dirname(__FILE__) );	}}if ( !function_exists('div_billing_fullurl') ){	function div_billing_fullurl(){		if(!isset($_SERVER['REQUEST_URI'])){			$serverrequri = $_SERVER['PHP_SELF'];		}else{			$serverrequri = $_SERVER['REQUEST_URI'];		}		$s = empty($_SERVER["HTTPS"]) ? '' : ($_SERVER["HTTPS"] == "on") ? "s" : "";		$protocol = substr(strtolower($_SERVER["SERVER_PROTOCOL"]), 0, strpos(strtolower($_SERVER["SERVER_PROTOCOL"]), '/')).$s;		$port = ($_SERVER["SERVER_PORT"] == "80") ? "" : (":".$_SERVER["SERVER_PORT"]);		return $protocol."://".$_SERVER['SERVER_NAME'].$port.$serverrequri;	}}if( !function_exists('check_remote_file')){	function check_remote_file($url) {		$ch = curl_init();		curl_setopt($ch, CURLOPT_URL,$url);		// don't download content		curl_setopt($ch, CURLOPT_NOBODY, 1);		curl_setopt($ch, CURLOPT_FAILONERROR, 1);		curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);		if(curl_exec($ch)!==FALSE) {			return true;		}		else{			return false;		}	}}function div_billing_get_attachment_id_from_url( $attachment_url = '' ) { 	global $wpdb;	$attachment_id = false; 	// If there is no url, return.	if ( '' == $attachment_url )		return; 	// Get the upload directory paths	$upload_dir_paths = wp_upload_dir(); 	// Make sure the upload path base directory exists in the attachment URL, to verify that we're working with a media library image	if ( false !== strpos( $attachment_url, $upload_dir_paths['baseurl'] ) ) { 		// If this is the URL of an auto-generated thumbnail, get the URL of the original image		$attachment_url = preg_replace( '/-\d+x\d+(?=\.(jpg|jpeg|png|gif)$)/i', '', $attachment_url ); 		// Remove the upload path base directory from the attachment URL		$attachment_url = str_replace( $upload_dir_paths['baseurl'] . '/', '', $attachment_url ); 		// Finally, run a custom database query to get the attachment ID from the modified attachment URL		$attachment_id = $wpdb->get_var( $wpdb->prepare( "SELECT wposts.ID FROM $wpdb->posts wposts, $wpdb->postmeta wpostmeta WHERE wposts.ID = wpostmeta.post_id AND wpostmeta.meta_key = '_wp_attached_file' AND wpostmeta.meta_value = '%s' AND wposts.post_type = 'attachment'", $attachment_url ) ); 	} 	return $attachment_id;}function div_billing_member_verifyemail($address) {	if (!eregi("^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$", $address)){ 		return false;	}else{		return true;	}}?>